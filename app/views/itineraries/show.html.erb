<% content_for :meta_title, "Find my itinerary on #{@itinerary.theme} is on #{DEFAULT_META["meta_product_name"]}" %>
<% content_for :meta_description, @itinerary.description %>


<div data-controller="map"
     data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"
     data-map-waypoints-value="<%= @waypoints.to_json %>"
     data-map-current-itinerary-index-value="0">

  <div class="position-relative col-12 col-sm-4 z-2 glass-card-background pe-4" style="height: -webkit-fill-available;">
    <div class="py-5">
      <div class="liquid-glass pb-3 p-3 fixed-bottom col-12 col-sm-4">
        <div class="z-2 mb-3 px-3">
          <h5 class="text-white mb-3"><%= @itinerary.theme %></h5>
        </div>

        <div class="p-3 bg-white rounded-4">
          <div class="mb-3">
            <%= render "shared/address", itinerary_objective: @itinerary_objective %>
          </div>

          <div class="d-flex justify-content-between align-items-start">
            <div class="trip-info">
              <h5 class="text-black my-3">⏳ <strong><span class="duration"></span></strong></h5>
              <h6 class="text-black">🏁 <span class="distance"></span></h6>
            </div>

            <div class="d-flex flex-column gap-2">
              <%= link_to best_itinerary_itinerary_objective_itineraries_path(@itinerary_objective),
                  class: "btn p-2 rounded-4 text-black text-decoration-none",
                  style: "background:white;border:2px solid black;" do %>
                Change my Detour
              <% end %>

              <%= link_to best_itinerary_itinerary_objective_itineraries_path(@itinerary_objective),
                  class: "btn p-2 rounded-4 text-white text-decoration-none",
                  style: "background:black;" do %>
                <strong>New itinerary</strong>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <%= render "shared/map", waypoints: @waypoints %>
</div>
