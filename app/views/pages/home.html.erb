<div style="position:relative" id="search" class="mt-3 col-12 col-sm-4 z-2" data-controller="form-visibility" data-action="address-autocomplete:inputFilled->form-visibility#toggleVisibility">
  <%= simple_form_for @itinerary_objective do |f| %>
    <%= f.simple_fields_for :departure_address, Address.new do |g| %>
      <%= g.input :full_address,
      input_html: {
        data: {
          address_autocomplete_target: "address",
          enable_geolocation: true
        },
        placeholder: "Departure address",
        class:"d-none"},
      wrapper_html: {
        class: "position-relative z-3",
        data: {
          controller: "address-autocomplete",
          address_autocomplete_api_key_value: ENV["MAPBOX_API_KEY"],
          address_autocomplete_identifier_value: "departureField",
          form_visibility_target: "departureAddress" }},
      label: false %>
    <% end %>

    <%= f.simple_fields_for :arrival_address, Address.new do |g| %>
      <%= g.input :full_address,
        input_html: {
          data: {address_autocomplete_target: "address"},
          placeholder: "Arrival address",
          class:"d-none"},
        wrapper_html: {
          class: "position-relative z-2 d-none",
          data: {
            controller: "address-autocomplete",
            address_autocomplete_api_key_value: ENV["MAPBOX_API_KEY"],
            address_autocomplete_identifier_value: "arrivalField",
            form_visibility_target: "arrivalAddress" }},
          label: false %>
    <% end %>

    <div id="ctas" class="row d-none" data-form-visibility-target="detourCtas">

      <div class="col-6 mb-3">
        <input type="radio" id="option1" name="choice" value="1">
          <label for="option1" class="direct shadow-sm d-flex align-items-center justify-content-center directcol-6">
            <span class="main-text">Direct</span>
          </label>
      </div>

      <div class="col-6">
        <input type="radio" id="option2" name="choice" value="2">
          <label for="option2" class="shadow-sm d-flex align-items-center justify-content-center max-10">
            <div>
              <span class="main-text">Short Detour</span><br>
              <span class="sub-text">+ 10 min</span>
            </div>
          </label>
      </div>

      <div class="col-6">
        <input type="radio" id="option3" name="choice" value="3">
          <label for="option3" class="shadow-sm d-flex align-items-center justify-content-center max-20">
            <div>
              <span class="main-text">Medium Detour</span><br>
              <span class="sub-text">+ 20 min</span>
            </div>
          </label>
      </div>

      <div class="col-6">
        <input type="radio" id="option4" name="choice" value="4">
          <label for="option4" class="shadow-sm d-flex align-items-center justify-content-center long-scroll">
            <span class="main-text">Long Detour</span><br>
            <span class="sub-text">+ 30 min</span>
          </label>
      </div>

      <div class="d-flex justify-content-end w-100">
        <%= f.submit "GO", class: "go btn btn-dark rounded-4 mt-3" %>
      </div>
    <% end %>
  </div>
</div>
<%= render "shared/map", waypoints: [] %>
