<style>
  body { margin:0; padding:0; }
  #map {position:fixed;
      inset: 0;
      width: 100%;
      height: 100%; z-index:2}
</style>

<div>
  <%= simple_form_for @itinerary_objective do |f| %>
    <%= f.input :itinerary_objective,
    input_html: { data: {address_autocomplete_target: "full_address"} },
    wrapper_html: { data: {controller: "address-autocomplete", address_autocomplete_api_key_value: ENV["pk.eyJ1IjoiYmFwdGkiLCJhIjoiY21kd3dnNWN6MWM2dTJtcXk1emM2YjRlYSJ9.Yl4EyIRYufUcEQVudpKhoQ"]} } %>
    <%= f.button :submit, 'Submit', class: 'btn btn-primary' %>
  <% end %>
</div>

<div id="map"></div>


<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
<script>
  mapboxgl.accessToken = "pk.eyJ1IjoiYmFwdGkiLCJhIjoiY21kd3dnNWN6MWM2dTJtcXk1emM2YjRlYSJ9.Yl4EyIRYufUcEQVudpKhoQ";

  const map = new mapboxgl.Map({
    container: "map",
    style: "mapbox://styles/mapbox/streets-v11",
    center: [2.3522, 48.8566],
    zoom: 12
  });

  const geolocate = new mapboxgl.GeolocateControl({
    positionOptions: { enableHighAccuracy: true },
    trackUserLocation: true,
    showUserHeading: true
  });

  map.addControl(geolocate);

  map.on("load", () => {
    geolocate.trigger();
  });
</script>
